---
import type { ImageMetadata } from "astro";
import { Picture } from "astro:assets";

interface Props {
  author: string;
  imagePath: string;
  contents: string;
  index: number;
}

const { author, imagePath, contents, index } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/*.{jpeg,jpg,png,gif}",
);
if (!images[imagePath])
  throw new Error(
    `"${imagePath}" does not exist in glob: "src/assets/*.{jpeg,jpg,png,gif}"`,
  );
---

<article class="snap-center">
  <div class="h-screen w-screen flex justify-center items-center">
    <figure>
      <Picture
        class="card-back-img"
        src={images[imagePath]()}
        formats={["avif", "webp"]}
        densities={[1, 1.5, 2]}
        alt=""
      />
    </figure>
  </div>
</article>

<style>
  figure {
    position: relative;
    display: block;
    width: 20vw;
  }

  figure:before {
    content: "";
    position: absolute;
    display: block;
    width: 132%;
    height: 132%;
    top: -16%;
    left: -16%;
    background-color: #f8f8f8;
    z-index: -1;
    box-shadow:
      inset 0px 10px 0.5em rgba(0, 0, 0, 0.25),
      inset 0.1em 0px 0.1em rgba(0, 0, 0, 0.1),
      inset -0.1em 0px 0.1em rgba(0, 0, 0, 0.05),
      0 0.3em 0.2em #fff;
    background-image: -moz-radial-gradient(
      50% 50%,
      circle farthest-corner,
      #ffffff,
      #f8f8f8 100%
    );
    background-image: -webkit-radial-gradient(
      50% 50%,
      circle farthest-corner,
      #ffffff,
      #f8f8f8 100%
    );
    background-image: -o-radial-gradient(
      50% 50%,
      circle farthest-corner,
      #ffffff,
      #f8f8f8 100%
    );
    background-image: -ms-radial-gradient(
      50% 50%,
      circle farthest-corner,
      #ffffff,
      #f8f8f8 100%
    );
    background-image: radial-gradient(
      50% 50%,
      circle farthest-corner,
      #ffffff,
      #f8f8f8 100%
    );
  }

  figure:after {
    content: "";
    position: absolute;
    display: block;
    width: 145%;
    height: 145%;
    top: -22.5%;
    left: -22.5%;
    background: #f8f8f8;
    z-index: -2;
    box-shadow:
      0px 1em 2em -1em rgba(0, 0, 0, 0.4),
      0px 2em 2em -1em rgba(0, 0, 0, 0.3),
      0px 3em 2em -1em rgba(0, 0, 0, 0.2),
      0px 4em 1.5em -1em rgba(0, 0, 0, 0.15),
      0px 2em 4em 0.5em rgba(0, 0, 0, 0.1),
      inset 0 0.2em 0.1em #fff;
  }

  img {
    background: #fff;
    position: relative;
    display: block;
    height: auto;
    padding: 6%;
    box-shadow: inset 0px 0.3em 0.1em rgba(0, 0, 0, 0.2);
  }
</style>

<script>
  // const cards = document.querySelectorAll("article");
  //
  // cards.forEach((card) => {
  //     card.addEventListener("click", () =>
  //         card.firstElementChild?.classList.toggle("rotate"),
  //     );
  // });
</script>
